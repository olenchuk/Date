use Test::More qw(no_plan);
use Date::Range;

my $ref_date = '2016-12-28';
my $dr = Date::Range->new(today_date => $ref_date, type => 'week');
while (my $line = <main::DATA>) {
    chomp $line;
    my ($day,$intervals,$span,$sliding_window,$direction,$start,$end,$last) = split /,/,$line;
    $dr->set_start_dow($day);
    $dr->set_direction($direction);
    $dr->set_sliding_window($sliding_window);
    $dr->set_span($span);
    $dr->set_intervals($intervals);
    my ($first_date,$end_date,$last_date) = $dr->get_dates;
    cmp_ok($first_date,'eq',$start,"D=$day | I=$intervals | S=$span | W=$sliding_window | D=$direction | START");
    cmp_ok($end_date,'eq',$end,"D=$day | I=$intervals | S=$span | W=$sliding_window | D=$direction | END");
    cmp_ok($last_date,'eq',$last,"D=$day | I=$intervals | S=$span | W=$sliding_window | D=$direction | LAST");
}

#foreach my $day (qw(Monday Tuesday Wednesday Thursday Friday Saturday Sunday)) {
#    foreach my $direction ('+') {
#        foreach my $sliding_window (0,1) {
#            foreach my $span (1,5) {
#                foreach my $intervals (-3..3) {
#                    next if $sliding_window == 1 and $span == 1;
#                    $dr->set_start_dow($day);
#                    $dr->set_direction($direction);
#                    $dr->set_sliding_window($sliding_window);
#                    $dr->set_span($span);
#                    $dr->set_intervals($intervals);
#                    my $atts = "D=$day | I=$intervals | S=$span | W=$sliding_window | D=$direction";
#                    my ($start,$end,$last) = $dr->get_dates();
#                    my $out = "$day,$intervals,$span,$sliding_window,$direction,$start,$end,$last";
#                    print "$out\n";
#                }
#            }
#        }
#    }
#}

__END__
Monday,-3,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,-2,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,-1,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,0,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,1,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,2,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,3,1,0,+,2016-12-26,2017-01-02,2017-01-01
Monday,-3,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,-2,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,-1,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,0,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,1,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,2,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,3,5,0,+,2016-12-26,2017-01-30,2017-01-29
Monday,-3,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,-2,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,-1,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,0,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,1,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,2,5,1,+,2016-12-26,2017-01-30,2017-01-29
Monday,3,5,1,+,2016-12-26,2017-01-30,2017-01-29
Tuesday,-3,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,-2,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,-1,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,0,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,1,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,2,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,3,1,0,+,2016-12-27,2017-01-03,2017-01-02
Tuesday,-3,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,-2,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,-1,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,0,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,1,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,2,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,3,5,0,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,-3,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,-2,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,-1,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,0,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,1,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,2,5,1,+,2016-12-27,2017-01-31,2017-01-30
Tuesday,3,5,1,+,2016-12-27,2017-01-31,2017-01-30
Wednesday,-3,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,-2,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,-1,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,0,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,1,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,2,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,3,1,0,+,2016-12-28,2017-01-04,2017-01-03
Wednesday,-3,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,-2,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,-1,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,0,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,1,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,2,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,3,5,0,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,-3,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,-2,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,-1,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,0,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,1,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,2,5,1,+,2016-12-28,2017-02-01,2017-01-31
Wednesday,3,5,1,+,2016-12-28,2017-02-01,2017-01-31
Thursday,-3,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,-2,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,-1,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,0,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,1,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,2,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,3,1,0,+,2016-12-22,2016-12-29,2016-12-28
Thursday,-3,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,-2,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,-1,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,0,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,1,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,2,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,3,5,0,+,2016-12-22,2017-01-26,2017-01-25
Thursday,-3,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,-2,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,-1,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,0,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,1,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,2,5,1,+,2016-12-22,2017-01-26,2017-01-25
Thursday,3,5,1,+,2016-12-22,2017-01-26,2017-01-25
Friday,-3,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,-2,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,-1,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,0,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,1,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,2,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,3,1,0,+,2016-12-23,2016-12-30,2016-12-29
Friday,-3,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,-2,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,-1,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,0,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,1,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,2,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,3,5,0,+,2016-12-23,2017-01-27,2017-01-26
Friday,-3,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,-2,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,-1,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,0,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,1,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,2,5,1,+,2016-12-23,2017-01-27,2017-01-26
Friday,3,5,1,+,2016-12-23,2017-01-27,2017-01-26
Saturday,-3,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,-2,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,-1,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,0,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,1,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,2,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,3,1,0,+,2016-12-24,2016-12-31,2016-12-30
Saturday,-3,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,-2,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,-1,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,0,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,1,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,2,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,3,5,0,+,2016-12-24,2017-01-28,2017-01-27
Saturday,-3,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,-2,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,-1,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,0,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,1,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,2,5,1,+,2016-12-24,2017-01-28,2017-01-27
Saturday,3,5,1,+,2016-12-24,2017-01-28,2017-01-27
Sunday,-3,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,-2,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,-1,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,0,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,1,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,2,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,3,1,0,+,2016-12-25,2017-01-01,2016-12-31
Sunday,-3,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,-2,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,-1,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,0,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,1,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,2,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,3,5,0,+,2016-12-25,2017-01-29,2017-01-28
Sunday,-3,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,-2,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,-1,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,0,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,1,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,2,5,1,+,2016-12-25,2017-01-29,2017-01-28
Sunday,3,5,1,+,2016-12-25,2017-01-29,2017-01-28
